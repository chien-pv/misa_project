$ ->
  total_volume = 0
  total_weight = 0
  thetich_container = parseInt($(".thetich_container").text())
  khoiluong_container = parseInt($(".khoiluong_container").text())
  $('.volume').each (index, value) ->
    volume_dt = parseInt($(this).text())
    total_volume += volume_dt
  $(".the_tich").text(total_volume)
  if thetich_container > total_volume
    $(".map_thetich").text("Thể tích đạt yêu cầu")
    $(".map").removeClass("alert-danger").addClass( "alert-success" )
  if thetich_container == total_volume
    $(".map_thetich").text("Thể tích đạt yêu cầu")
    $(".map").removeClass("alert-danger").addClass( "alert-success" )
  if thetich_container < total_volume
    $(".map_thetich").text("Thể tích vượt quá mức cho phép")
    $(".map").removeClass("alert-success").addClass( "alert-danger" )
  $('.weight').each (index, value) ->
    weight_dt = parseInt($(this).text())
    total_weight += weight_dt
  $(".khoi_luong").text(total_weight)
  if thetich_container > total_volume
    $(".map_khoiluong").text("Khối lượng đạt yêu cầu")
    $(".map").removeClass("alert-danger").addClass( "alert-success" )
  if thetich_container == total_volume
    $(".map_khoiluong").text("Khối lượng đạt yêu cầu")
    $(".map").removeClass("alert-danger").addClass( "alert-success" )
  if thetich_container < total_volume
    $(".map_khoiluong").text("Khối lượng vượt quá mức cho phép")
    $(".map").removeClass("alert-success").addClass( "alert-danger" )
  
  $('.quantity').keyup ->
    quantity = $(this).val()
    row = $(this).closest('tr')
    volume = row.next().find(".volume")
    volume_detail  = row.next().find(".volume_detail")
    val_volume = volume_detail.val()
    volume.text(val_volume*quantity)
    weight = row.next().find(".weight")
    weight_detail  = row.next().find(".weight_detail")
    val_weight = weight_detail.val()
    weight.text(val_weight*quantity)

    total_volume = 0
    total_weight = 0
    $('.volume').each (index, value) ->
      volume_dt = parseInt($(this).text())
      total_volume += volume_dt
    $(".the_tich").text(total_volume)

    if thetich_container > total_volume
      $(".map_thetich").text("Thể tích đạt yêu cầu")
      $(".map").removeClass("alert-danger").addClass( "alert-success" )
    if thetich_container == total_volume
      $(".map_thetich").text("Thể tích đạt yêu cầu")
      $(".map").removeClass("alert-danger").addClass( "alert-success" )
    if thetich_container < total_volume
      $(".map_thetich").text("Thể tích vượt quá mức cho phép")
      $(".map").removeClass("alert-success").addClass( "alert-danger" )

    $('.weight').each (index, value) ->
      weight_dt = parseInt($(this).text())
      total_weight += weight_dt
    $(".khoi_luong").text(total_weight)
    if thetich_container > total_volume
      $(".map").removeClass("alert-danger").addClass( "alert-success" )
      $(".map_khoiluong").text("Khối lượng đạt yêu cầu")
    if thetich_container == total_volume
      $(".map").removeClass("alert-danger").addClass( "alert-success" )
      $(".map_khoiluong").text("Khối lượng đạt yêu cầu")
    if thetich_container < total_volume
      $(".map_khoiluong").text("Khối lượng vượt quá mức cho phép")
      $(".map").removeClass("alert-success").addClass( "alert-danger" )